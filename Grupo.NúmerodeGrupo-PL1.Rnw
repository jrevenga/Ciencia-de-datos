\documentclass[a4paper, 12pt]{article}
\usepackage[spanish]{babel}
\usepackage[hmargin=2.5cm,vmargin=2.5cm]{geometry}
\usepackage{graphicx}
\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{fancyhdr}

\setlength{\arrayrulewidth}{0.4mm}

\newcommand{\HRule}{\rule{\linewidth}{0.5mm}}

\begin{document}
	\begin{titlepage}
		\begin{center}
			\includegraphics[width=0.5\textwidth]{logoUAH.png}~\\[2cm]
			
			\textsc{\Large \\Fundamentos de la Ciencia de Datos}\\[2cm]
			
			\HRule \\[0.4cm]
			{\LARGE \bfseries Prueba de Laboratorio 1 (PL1) \\[0.4cm]}
			\HRule \\[2cm]
			
			\large\textbf{Jorge Revenga Martín de Vidales}\\
			\large\textbf{Ángel Salgado Aldao}\\
			\large\textbf{Adrián García}\\
			\large\textbf{}\\ Grado en Ingeniería Informática \\ Universidad de Alcalá
			
			\vfill
			
			{\large \today}
		\end{center}
	\end{titlepage}
	% Configura los encabezados y pies de página
	\pagestyle{fancy}
	\fancyhf{} % Limpia todos los encabezados y pies de página actuales
	% Encabezado
	\fancyhead[RO,LE]{\textit{Fundamentos de la ciencia de datos}}
	\fancyhead[LO,RE]{\textit{Prueba de Laboratorio 1 (PL1)}}
	% Pie de página
	\fancyfoot[LO,RE]{\textit{Universidad de Alcalá}}
	\fancyfoot[RO,LE]{\thepage}  % Número de página en la esquina inferior derecha
	\newpage
	
	\thispagestyle{plain}
	\tableofcontents
	
	
	\newpage
	\section{Introducción - Consideraciones previas}
	\subsection{Funciones básicas}
	Para utilizar una función en R se escribe el nombre de la función, seguido de los parámetros de entrada entre paréntesis e.g.: \texttt{función(parámetros)}
	
	\begin{itemize}
		\item[-]Función \texttt{contributors()}: Muestra los creadores del programa (R)
		
		\item[-]Función \texttt{help()}: Abre un HTML con información sobre la función \texttt{help()} o de la función entre paréntesis de haberla. Para todas las funciones que programemos (para todas las que existan) en R debe poder usarse la función \texttt{help()}.
		
		En el archivo HTML se distinguen varios elementos:
		
		\begin{itemize}
			\item función \{paquete\}: la función de la que se obtiene información seguida del paquete al que pertenece.
			\item Description: descripción de la función.
			\item Usage: aparece la función y todos los argumentos que se le pueden introducir.
			\item Arguments: Explicación de los argumentos o parámetros.
			\item Details: Detalles adicionales de la función.
			\item Offline help: Ayuda sin conexión.
			\item Note: Nota del autor.
			\item References: Referencias.
			\item Examples: Ejemplos de uso de la función.
		\end{itemize}
		
		\item[-]Función \texttt{getwd()} se utiliza para obtener el directorio de trabajo actual (working directory).
		
		\item[-]Función \texttt{setwd(\string"C:/…")} permite cambiar el nuevo directorio de trabajo en el que queramos trabajar.
		
		\item[-] \texttt{help.start()}: Manda a un compendio de todas las ayudas disponibles para trabajar con R.
		
		\item[-]Función \texttt{list.files()}: Muestra todos los archivos en el directorio. \texttt{dir()} hace lo mismo. 
	\end{itemize}
	
	\newpage
	
	\subsection{Introducción de un archivo .txt en R}
	Para introducir una tabla desde un archivo \texttt{.txt} en R con seguridad de que vaya a cargar correctamente se deben seguir las siguientes reglas (pueden no ser todas necesarias en todos los casos).
	
	\begin{itemize}
		\item Debe haber una tabulación entre dato y dato, más tabulaciones no lo rompen del todo.
		
		\item Debe haber una primera columna que numere las filas. Excepto en la primera fila, que sólo habrá una tabulación, seguida de los nombres de las variables separados por tabulaciones.
		
		\item Hay que introducir un enter al final del documento.
		
		\item Los números decimales deben ser introducidos con puntos, no con comas.
		
		\item Los datos tienen que ir juntos, los espacios deben ser separados con guiones u otros símbolos.
	\end{itemize}
	
	
	\subsection{Uso de Sweave}
	Vamos a generar un archivo pdf con código R embedido en el mismo de forma automática, para esto haremos uso de Sweave.
	
	\begin{itemize}
		\item \texttt{rnwfile <- system.file("Sweave", \string"example-1.Rnw", package =\string"utils")}: obtiene la ubicación del archivo "example-1.Rnw" que está incluido en el paquete "utils" y la almacena en la variable "rnwfile".
		
		\item \texttt{Sweave(rnwfile)}: Genera un conjunto de documentos nuevos, entre ellos un .txt, un .pdf y demás, a partir de la variable definida.
		
		\item \texttt{tools::texi2pdf(\string"example-1.tex")}: Genera el .tex de sweave en un pdf. No funciona sin un compilador de latex (como miktex) en la máquina. Al descargar latex se puede seleccionar una opción para que se realice la carga automáticamente.
	\end{itemize}
	
	\subsection{Paquetes por defecto al abrir R}
	\begin{itemize}
		\item \texttt{getOption("defaultPackages")}: muestra los (6) paquetes por defecto que cargan al abrir R.
		\item \texttt{library(help="base")}: Muestra las funciones del paquete ""base" junto con una descripción básica, \texttt{library(help=\string"utils")} muestra funciones útiles para trabajar con R. Estos son parte de los 23 paquetes instalados por defecto.
		\item \texttt{library()}: Muestra los paquetes en la biblioteca (los instalados manualmente + los de la biblioteca estándar).
		\item \texttt{library(paquete)}: Carga el paquete, también podemos hacerlo si nos vamos a paquetes/cargar paquete.
	\end{itemize}
	\subsection{Instalar paquetes nuevos}
	\begin{itemize}
		\item Nos vamos a paquetes/seleccionar el espejo CRAN.
		\item Seleccionamos el repositorio que queremos utilizar y elegimos el paquete (También se puede instalar con \texttt{install.packages(\string"paquete")}).
		\item También se puede instalar desde el dispositivo local, para ello hay que irse a la página oficial de CRAN.
		\begin{itemize}
			\item Para aprender se usan las viñetas y luego el manual.
			\item Se descarga la versión r-release.
			\item Se crea un directorio temporal (temp) y se mete ahí el zip descargado.
			\item \texttt{install.packages(\string"c:direccion\_al\_zip/tmp/nombre.zip",repos=NULL)}: lo instala.
		\end{itemize} 
		\item Para instalar el paquete Arules vamos a descargarlo, también hay que descargar el manual y las viñetas, luego usar \texttt{install.packages()} para las dependencias.
	\end{itemize}
	
	\section{Ejercicios con ayuda del profesor}
	Realización de cuatro ejercicios con ayuda del profesor en los que se van a realizar, utilizando el entorno R, un análisis de descripción de datos, un análisis de asociación y dos análisis de detección de datos anómalos, aplicando todos los conceptos teóricos vistos en cada lección.

	\subsection{Análisis de descripción de datos}
	El primer conjunto de datos, que se empleará para realizar el análisis de descripción de datos, estará formado por datos de una característica cualitativa, nombre, y otra cuantitativa, Radio, de los satélites menores de Urano, es decir, aquellos que tienen un Radio menor de 50 Km, dichos datos, los primeros cualitativos nominales, y los segundos cuantitativos continuos, son: (Nombre, Radio en Km): Cordelia, 13; Ofelia, 16; Bianca, 22; Crésida, 33; Desdémona, 29; Julieta, 42; Rosalinda, 27; Belinda, 34; Luna-1986U10, 20; Calíbano, 30; Luna-999U1, 20; Luna 1999U2, 15.
	
	\paragraph{Solución:}
	\begin{itemize}
		\item \texttt{s<-read.table(\string"satelites.txt")}: Se asigna los valores de la tabla satelites (almacenada en el directorio de trabajo) a la variable \texttt{s}. Al teclear introducir el nombre de la variable como comando se deberían mostrar los datos.
<<>>=
s<-read.table("satelites.txt")
s
@
		\item \texttt{dim(s)}: Devuelve las dimensiones de una matriz. En este caso \texttt{[1] 12 2} quiere decir 12 filas, 2 columnas.
<<>>=
dim(s)
@
		\item \texttt{so=s[order(s\$Radio),]}: ordena las filas de un DataFrame \texttt{s} según los valores de la variable "Radio". Para hacerlo, se usa la función \texttt{order()} para obtener el orden de las filas en función de los valores de "Radio", y luego se aplica ese orden al DataFrame 's' utilizando los corchetes \texttt{[ ]}. Como resultado, \texttt{so} contendrá las filas de s ordenadas según los valores de "Radio".
<<>>=
so<-s[order(s$Radio),]
so
@
		\item \texttt{so=s[rev(order(s\$Radio)),]}: Añadiendo \texttt{rev()} obtenemos las filas en orden decreciente
<<>>=
so<-s[rev(order(s$Radio)),]
so
@
		\item \texttt{length(s\$Radio)}: Devuelve la longitud de la columna
<<>>=
length(s$Radio)
@
		\item Para realizar el cálculo del rango:
		\begin{itemize}
			\item[-] \texttt{rangor=max(s\$Radio)-min(s\$Radio) }: siguiendo lo visto en teoría, el resultado es 29
<<>>=
rangor=max(s$Radio)-min(s$Radio)
rangor
@
			\item[-] \texttt{range(s\$Radio)}: devuelve el número menor y el mayor, no la diferencia. Queremos una función que calcule el rango, por lo que primero la creamos utilizando el comando \texttt{function()}.
<<>>=
range(s$Radio)
@
			\item[-] Podemos definir la variable Radio=s\$Radio para ahorrar tiempo
<<>>=
Radio = s$Radio
@
			\item[-] \texttt{rango=function(Radio)\{max(Radio)-min(Radio)\}}: En los paréntesis, especificamos los argumentos que la función recibirá, y entre llaves, definimos las instrucciones que llevará a cabo.
<<>>=
rango=function(Radio){max(Radio)-min(Radio)}
rango(Radio)
@
			\item[-] \texttt{dump("rango", file="rango.R")}: empleamos la función dump para guardar nuestra función en el archivo "rango.R". Para utilizarla posteriormente, la cargaremos utilizando el comando source (\texttt{source("rango.R")}).
<<>>=
dump("rango", file="rango.R")
source("rango.R")
@
		\end{itemize}
		\newpage
		
		\item \texttt{frecabsradio<-table(s\$Radio)}: calcula la frecuencia absoluta para todos los valores
<<>>=
frecabsradio<-table(s$Radio)
frecabsradio
@
		\item \texttt{frecabscumradio<-cumsum(s\$Radio)}: calcula la frecuencia absoluta acumulada para todos los valores
<<>>=
frecabsacumradio<-cumsum(frecabsradio)
frecabsacumradio
@
		\item \texttt{frecrel<-function(x)\{table(x)/length(x)\}}: no tenemos función para la frecuencia relativa, por lo que la definimos. La función se puede escribir de forma diferente, ya que en este caso 'Radio' no es una referencia a una variable sino un parámetro de entrada de la función, por lo que \texttt{frecrel<-function(x)\{table(x) /length(x)\}} serviría de igual manera. \texttt{x=s\$Radio} y \texttt{frecrelradio=frecrel(x)} calcula usando la función definida.
\small
<<>>=
frecrel<-function(x){table(x)/length(x)}
dump("frecrel", file="frecrel.R")
source("frecrel.R")
x=s$Radio
frecrelradio=frecrel(x)
frecrelradio
@
\normalsize
		\item \texttt{frecrelacumradio<-cumsum(frecrelradio)}: no tenemos función para la frecuencia relativa acumulada tampoco, se puede calcular usando \texttt{cumsum()} de la frecuencia relativa
\small
<<>>=
frecelacumradio <- cumsum(frecrelradio)
frecelacumradio
@
\normalsize

		\newpage
		\item \texttt{mr<-mean(Radio)}: Calcula la media
<<>>=
mr<-mean(s$Radio)
mr
@
		\item \texttt{sdr<-sd(Radio)}: Para la desviación estándar se usa la función sd, el problema yace en que esta función realiza la desviación típica muestral (la cual divide entre N-1 y no entre N) para realizar inferencias probabilísticas. Hay casos como es el de este ejercicio que tenemos todos los datos (la población entera) y nos interesa usar la desviación estándar poblacional
<<>>=
sdr<-sd(s$Radio)
sdr
@
		\item \texttt{sdr=sqrt((sdr\^2)*11/12)}: creamos la función, quitándole la raíz cuadrada con el \^2 para multiplicar después por N-1/N, para después añadirle la raiz cuadrada de nuevo. Este código puede ser fácilmente optimizado y definido en una función para su reutilización
<<>>=
sdr=sqrt((sdr^2)*11/12)
sdr
@
		\item \texttt{varr=var(Radio)}: Calcula la varianza (en este caso se trata también de la varianza muestral)
<<>>=
varr=var(x)
varr
@
		\item \texttt{varr=varr*11/12}: Calculamos la varianza poblacional de la misma forma que la desviación típica, sin tener que preocuparnos por la raíz cuadrada
<<>>=
varr=varr*11/12
varr
@
		\item \texttt{Medianr<-median(s\$Radio)}: Para la mediana usamos la función \texttt{median()}, pero esta función usa distribuciones de probabilidad en vez de usar ecuaciones y muchas veces no dará el resultado correcto
<<>>=
medianr<-median(x)
medianr
@
		\item \texttt{cuart1=quantile(Radio, 0.25)}: Calcula el primer cuartil, puede usarse para calcular cualquier centil (0.\%). Le ocurre el mismo problema que a la mediana
<<>>=
cuartl=quantile(x,0.25)
cuartl
@
	\end{itemize}
	
	
	\subsection{Análisis de asociación}
	El segundo conjunto de datos, que se empleará para realizar el análisis de asociación, estará formado por las siguientes 6 cestas de la compra: {Pan, Agua, Leche, Naranjas}, {Pan, Agua, Café, Leche}, {Pan, Agua, Leche}, {Pan, Café, Leche}, {Pan, Agua}, {Leche}.
	
	\paragraph{Solución}
	\begin{itemize}
		\item \texttt{library(arules)}: Carga el paquete arules.
		\item \texttt{search()}: Muestra los paquetes cargados.
		\item \texttt{library(Matrix)}: Carga el paquete Matrix.
		\item \texttt{muestra<-Matrix(c(1,1,0,1,1, 1,1,1,1,0, 1,1,0,1,0, 1,0,1,1,0, 1,1,0,\\0,0, 0,0,0,1,0) ,6,5, byrow=TRUE, dimnames=list(c(‘‘suceso1’’ , ‘‘suceso2’’ , ‘‘suceso3’’ , ‘‘suceso4’’ , ‘‘suceso5’’ , ‘‘suceso6’’ ), c(‘‘Pan’’ , ‘‘Agua’’ , ‘‘Café’’ , ‘‘Leche’’ , ‘‘Naranjas’’)), sparse=TRUE)}: Carga los datos del problema
		\item \texttt{muestrangCMatrix<-as(muestra,"nsparseMatrix")}: utilizamos la función as para convertir el objeto muestra a una representación de matriz dispersa (sparse matrix)
		\item \texttt{traspmuestrangCMatrix<-t(muestrangCMatrix)}: Trasponemos y tenemos la matriz como arules nos la pide.
		\item \texttt{transacciones<-as(traspmuestrangCMatrix,"transactions")}.
		\item \texttt{summary(transacciones)}: Muestra más información.
		\item \texttt{asociaciones<-apriori (transacciones, parameter=list (support = 0.5, \\confidence = 0.8))}: Aplica el algoritmo apriori con umbral de soporte de 0.5 y de confianza de 0.8
		\item \texttt{inspect(asociaciones)}: Muestra las asociaciones que pasan el algoritmo.
	\end{itemize}
	\paragraph{Ejecución}
<<>>=
library(arules)
search()
library(Matrix)
muestra<-Matrix(c(1,1,0,1,1, 1,1,1,1,0, 1,1,0,1,0, 1,0,1,1,0, 1,1,0,
0,0, 0,0,0,1,0),6,5,byrow=TRUE,dimnames=list(c("suceso1", "suceso2",
"suceso3", "suceso4", "suceso5", "suceso6"), c("Pan", "Agua", "Café",
"Leche", "Naranjas")), sparse=TRUE)
muestrangCMatrix<-as(muestra, "nsparseMatrix")
traspmuestrangCMatrix<-t(muestrangCMatrix)
transacciones<-as(traspmuestrangCMatrix, "transactions")
summary(transacciones)
asociaciones<-apriori(transacciones, parameter=list(support=0.5,
confidence=0.8))
inspect(asociaciones)
@
	\subsection{Análisis de detección de datos anómalos}
	
	\subsubsection{Técnicas con base estadística}
	El tercer conjunto de datos, que se empleará para realizar el análisis de detección de datos anómalos utilizando técnicas con base estadística, estará formado por los siguientes 7 valores de resistencia y densidad para diferentes tipos de hormigón {Resistencia, Densidad}: {3, 2; 3.5, 12; 4.7, 4.1; 5.2, 4.9; 7.1, 6.1; 6.2, 5.2; 14, 5.3}. Aplicar las medidas de ordenación a la resistencia y las de dispersión a la densidad.
	
	\paragraph{Caja y Bigotes}

	\begin{itemize}
		\item \texttt{(muestra=t(matrix(c(3,2,3.5,12,4.7,4.1,5.2,4.9,7.1,6.1,6.2,5.2,14,5.3),2,7,\\dimnames=list(c("r","d")))))}: cargamos los datos
		\item \texttt{(muestra=data.frame(muestra))}: Convertimos la matriz a un data.frame
		\item \texttt{(boxplot(muestra\$r,range=1.5,plot=FALSE))}: Boxplot de forma predeterminada muestra gráficamente la resolución con caja y bigotes, por lo que se añade \texttt{plot=FALSE} para que no lo haga
		\item \texttt{(cuar1r<-quantile(muestra\$r, 0.25))}: Cálculo del primer cuartil
		\item \texttt{(cuar3r<-quantile(muestra\$r, 0.75))} Cálculo del tercer cuartil
		\item \texttt{(int=c(cuar1r-1.5*(cuar3r-cuar1r),cuar3r+1.5*(cuar3r-cuar1r)))}: calcula el rango de los datos que no son outliers
		\item \texttt{for(i in 1:length(muestra\$r)) {if(muestra\$r[i]<int[1] || muestra\$r[i]>int[2])\\ {print("el suceso"); print(i); print("es un suceso anómalo o outlier")}}}
	\end{itemize}

	\paragraph{Ejecución}
<<>>=
(muestra=t(matrix(c(3,2,3.5,12,4.7,4.1,5.2,4.9,7.1,6.1,6.2,5.2,14,5.3),2,7,
dimnames=list(c("r","d")))))
(muestra=data.frame(muestra))
(boxplot(muestra$r,range=1.5,plot=FALSE))
(cuar1r<-quantile(muestra$r, 0.25))
(cuar3r<-quantile(muestra$r, 0.75))
(int=c(cuar1r-1.5*(cuar3r-cuar1r),cuar3r+1.5*(cuar3r-cuar1r)))
for(i in 1:length(muestra$r)) {if(muestra$r[i]<int[1] || muestra$r[i]>int[2])
{print("el suceso"); print(i); print("es un suceso anómalo o outlier")}}
@
	
	\paragraph{Desviación típica}
	\begin{itemize}
		\item \texttt{sdd=sqrt(var(muestra\$d)*length(muestra\$d)-1)/length(muestra\$d)}: calculamos la desviación estándar poblacional a partir del dataframe del apartado anterior y la función var() que calcula la varianza muestral
		\item \texttt{(intdes=c(mean(muestra\$d)-2*sdd,mean(muestra\$d)+2*sdd))}: calcula el rango de los datos que no son outliers
		\item \texttt{for(i in 1:length(muestra\$d)) {if (muestra\$d[i]<intdes[1] || \\ muestra\$d[i]>intdes[2]) {print("el suceso");print(i);print(muestra\$d[i]);print("es un suceso anómalo o outlier")}}}
	\end{itemize}
	\paragraph{Ejecución}
<<>>=
sdd=sqrt(var(muestra$d)*length(muestra$d)-1)/length(muestra$d)
(intdes=c(mean(muestra$d)-2*sdd,mean(muestra$d)+2*sdd))
for(i in 1:length(muestra$d)) 
{if (muestra$d[i]<intdes[1] || muestra$d[i]>intdes[2]){print("el suceso")
;print(i);print(muestra$d[i]);print("es un suceso anómalo o outlier")}}
@
	\subsubsection{Técnicas basadas en la proximidad y en la densidad}
	El cuarto conjunto de datos, que se empleará para realizar el análisis de detección de datos anómalos utilizando técnicas basadas en la proximidad y en la densidad, estará formado por las siguientes 5 calificaciones de estudiantes: 1. {4, 4}; 2. {4, 3}; 3. {5, 5}; 4. {1, 1}; 5. {5, 4} donde las características de las calificaciones son: (Teoría, Laboratorio).
	
	\paragraph{Vecinos próximos}
	\begin{itemize}
		\item \texttt{(muestra=matrix(c(4,4,4,3,5,5,1,1,5,4),2,5))}: obtenemos la matriz
		\item \texttt{(muestra=t(muestra))}: Trasponemos la matriz
		\item Calculamos las distancias euclídeas: \texttt{(distancias=as.matrix(dist(muestra)))}
		\item Hay que ordenar los valores \texttt{(distancias=matrix(distancias,5,5))}
		\\ \texttt{for (i in 1:5){distancias[,i]=sort(distancias[,i])}; (distanciasordenadas=distancias)}
		\item Como el primer vecino es él mismo, la distancia es cero, por lo que vamos a usar k=4 \texttt{for(i in 1:5){if(distanciasordenadas[4,i]>2.5){print(i);print("es un suceso anómalo o outlier")}}}
		\item \texttt{(distanciasM=as.matrix(dist(muestra,method="manhattan")))}: Cálculo de distancias de Manhattan
	\end{itemize}
	\paragraph{Ejecución}
<<>>=
(muestra=matrix(c(4,4,4,3,5,5,1,1,5,4),2,5))
(muestra=t(muestra))
(distancias=as.matrix(dist(muestra)))
(distancias=matrix(distancias,5,5))
for (i in 1:5){distancias[,i]=sort(distancias[,i])};
 (distanciasordenadas=distancias)
for(i in 1:5){if(distanciasordenadas[4,i]>2.5)
{print(i);print("es un suceso anómalo o outlier")}}
(distanciasM=as.matrix(dist(muestra,method="manhattan")))
@
	
	\paragraph{Local Outlier Factor}
	Existen varios paquetes para hacer este cálculo que utilizan métodos distintos al visto en teoría: RLof, DDoutlier, DMwR son algunos de ellos.
	
	\section{Ejercicios de forma autónoma}
	Realización de cuatro ejercicios de forma autónoma por cada grupo de estudiantes en los que se van a realizar, utilizando el entorno R, un análisis de descripción de datos, un análisis de asociación y dos análisis de detección de datos anómalos, aplicando todos los conceptos teóricos vistos en cada lección:
	
	\subsection{Análisis de descripción de datos}
	El primer conjunto de datos, que se empleará para realizar el análisis de descripción de datos, estará formado por datos de una característica cuantitativa, distancia, desde el domicilio de cada estudiantes hasta la Universidad, dichos datos, cuantitativos continuos, son: 16.5, 34.8, 20.7, 6.2, 4.4, 3.4, 24, 24, 32, 30, 33, 27, 15, 9.4, 2.1, 34, 24, 12, 4.4, 28, 31.4, 21.6, 3.1, 4.5, 5.1, 4, 3.2, 25, 4.5, 20, 34, 12, 12, 12, 12, 5, 19, 30, 5.5, 38, 25, 3.7, 9, 30, 13, 30, 30, 26, 30, 30, 1, 26, 22, 10, 9.7, 11, 24.1, 33, 17.2, 27, 24, 27, 21, 28, 30, 4, 46, 29, 3.7, 2.7, 8.1, 19, 16.
	\paragraph{Solución:}
	\begin{itemize}
		\item \texttt{s<-read.table(‘‘distancias.txt’’)}: Se asigna los valores de la tabla distancias (almacenada en el directorio de trabajo) a la variable "s". Al teclear introducir el nombre de la variable como comando se deberían mostrar los datos
		
		\item Cálculo del rango con la función: \texttt{ranger(distancias\$Km)}
		\begin{itemize}
			\item[-] Parámetros:
			\begin{itemize}
				\item \texttt{vector}: Vector de números.
			\end{itemize}
			
			\item[-]  Retorno: Devuelve el rango del vector introducido, es decir, la diferencia entre el número mayor y menor de dicho vector.
			
			\item[-] Explicación: Esta función se encarga de calcular el rango del vector introducido por parámetro. Va recorriendo el vector y durante cada iteración va comparando el valor actual con el máximo y el mínimo actuales, si dicho valor es menor o mayor que el mínimo o máximo respectivamente, actualiza el valor correspondiente. Una vez finalizado el recorrido calcula la diferencia entre el máximo y el mínimo final.
			\
		\end{itemize} 
		
		\item Cálculo de la frecuencia absoluta (\texttt{f$_{i}$}) con la función: \texttt{frecAbsr(distancias\$Km)}
		\begin{itemize}
			\item[-] Parámetros: 
			\begin{itemize}
				\item \texttt{vector}: Vector de datos.
			\end{itemize}
			
			\item[-] Retorno: Devuelve un dataframe con el número de apariciones totales de cada dato del vector. 
			
			\item[-] Explicación: Esta función se encarga de contar el número de apariciones de cada elemento del vector. Recorre el vector incrementando en 1 la frecuencia de un elemento cada vez que se repita dicho elemento.
		\end{itemize}
		
		\item Cálculo de la frecuencia absoluta acumulada (\texttt{fa$_{i}$}) con la función: \texttt{frecAbsAcumr(distancias\$Km)}
		\begin{itemize}
			\item[-] Parámetros: 
			\begin{itemize}
				\item \texttt{vector}: Vector de datos.
			\end{itemize}
			
			\item[-] Retorno: Devuelve un dataframe con el número de apariciones totales acumuladas de cada dato del vector. 
			
			\item[-] Explicación: Esta función se encarga de calcular las frecuencias acumuladas de cada dato del vector. Calcula primero las frecuencias absolutas con \texttt{frecAbsr(vector)} y recorre el dataframe resultado, sumando a la frecuencia absoluta del dato actual, la frecuencia absoluta acumulada del dato anterior.
		\end{itemize}
		
		\item Cálculo de la frecuencia relativa (\texttt{fr$_{i}$}) con la función: \texttt{frecRelr(distancias\$Km)}
		\begin{itemize}
			\item[-] Parámetros: 
			\begin{itemize}
				\item \texttt{vector}: Vector de datos.
			\end{itemize}
			
			\item[-] Retorno: Devuelve un dataframe con el número de apariciones totales de cada dato en relación al numero de elementos del vector. 
			
			\item[-] Explicación: Esta función se encarga de calcular las frecuencias relativas de cada dato del vector. Calcula previamente las frecuencias absolutas y después recorre el dataframe resultado, dividiendo la frecuencia absoluta de cada dato entre el número total de elementos, de la forma \texttt{f$_{i}$/length(vector)}
		\end{itemize}
		
		\item Cálculo de la frecuencia relativa acumulada (\texttt{fra$_{i}$}) con la función: \texttt{frecRelAcumr(distancias\$Km)}
		\begin{itemize}
			\item[-] Parámetros: 
			\begin{itemize}
				\item \texttt{vector}: Vector de datos.
			\end{itemize}
			
			\item[-] Retorno: Devuelve un dataframe con las frecuencias relativas acumuladas de cada dato del vector. 
			
			\item[-] Explicación: Esta función se encarga de calcular las frecuencias relativas acumuladas de cada dato del vector. Calcula primero las frecuencias relativas con \texttt{frecRelr(vector)} y recorre el dataframe resultado, sumando a la frecuencia relativa del dato actual, la frecuencia relativa acumulada del dato anterior.
		\end{itemize}
		
		\item Cálculo de la media aritmética (\texttt{$\bar{x}_{a}$}) con la función: \texttt{meanr(distancias\$Km)}
		\begin{itemize}
			\item[-] Parámetros: 
			\begin{itemize}
				\item \texttt{vector}: Vector de números.
			\end{itemize}
			
			\item[-] Retorno: Devuelve un numero que representa la media aritmética 
			
			\item[-] Explicación: Esta función se encarga de calcular la media aritmética, recorriendo el vector sumando todos los valores y después dividiéndolos entre el número total de elementos del vector, de la forma: \\
			$\bar{x} = \frac{1}{n} \sum_{i=1}^{n} x_i$
		\end{itemize}
		
		\item Cálculo de la desviación típica (\texttt{s}) con la función: \texttt{sdr(distancias\$Km)}
		\begin{itemize}
			\item[-] Parámetros: 
			\begin{itemize}
				\item \texttt{vector}: Vector de números.
			\end{itemize}
			
			\item[-] Retorno: Devuelve un número que representa la desviación típica. 
			
			\item[-] Explicación: Esta función se encarga de calcular la desviación típica. Primero calcula la media con la función \texttt{meanr(vector)}, después va recorriendo el vector calculando la suma de cuadrados entre la diferencia de cada valor y la media, lo divide todo entre el número total de elementos del vector y por último realiza la raíz cuadrada de dicho resultado, de la forma: \\
			$s = \sqrt{\frac{1}{n} \sum_{i=1}^{n} (x_i - \bar{x})^2}$
		\end{itemize}
		
		\item Cálculo de la varianza (\texttt{s$^2$}) con la función: \texttt{varr(distancias\$Km)}
		\begin{itemize}
			\item[-] Parámetros: 
			\begin{itemize}
				\item \texttt{vector}: Vector de números.
			\end{itemize}
			
			\item[-] Retorno: Devuelve un número que representa la varianza. 
			
			\item[-] Explicación: Esta función se encarga de calcular la varianza. Primero calcula la desviación típica con la función \texttt{sdr(vector)} y después eleva al cuadrado dicho resultado, de la forma: \\
			$s^2 = \sqrt{\frac{1}{n} \sum_{i=1}^{n} (x_i - \bar{x})^2}$
		\end{itemize}
		
		\item Cálculo de la mediana (\texttt{\~{x}}) con la función: \texttt{medianr(distancias\$Km)}
		\begin{itemize}
			\item[-] Parámetros: 
			\begin{itemize}
				\item \texttt{vector}: Vector de números.
			\end{itemize}
			
			\item[-] Retorno: Devuelve un número que representa la mediana. 
			
			\item[-] Explicación: Esta función se encarga de calcular la mediana. Primero ordena de forma creciente el vector con la función \texttt{sort(vector)} y calcula la longitud del mismo, dependiendo de si la longitud es par o impar, calcula la mediana de la forma: \\
			$\text{\texttt{\~{x}}} = \begin{cases} 
				x_{\frac{n+1}{2}} & \text{si } n \text{ es impar} \\
				\frac{1}{2}(x_{\frac{n}{2}} + x_{\frac{n}{2}+1}) & \text{si} n \text{ es par}
			\end{cases}$
		\end{itemize}
		
		\item Cálculo de laos cuartiles (\texttt{Q$_{i}$}) con la función: \texttt{quantilerr(distancias\$Km,p)}
		\begin{itemize}
			\item[-] Parámetros: 
			\begin{itemize}
				\item \texttt{vector}: Vector de números.
				\item \texttt{p}: Número decimal del cuantil.
			\end{itemize}
			
			\item[-] Retorno: Devuelve un número que representa el cuantil de \texttt{p}. 
			
			\item[-] Explicación: Esta función se encarga de calcular el cuantil. Primero ordena de forma creciente el vector con la función \texttt{sort(vector)}, después calcula la posición del cuantil, de la forma: \\
			$\text{\texttt{{$Q_{p}$}}} = \begin{cases} 
				x_{\frac{np}{2}}+x_{\frac{np+1}{2}} & \text{si } np \in \mathbb{N} \\
				x_{\lfloor{np}\rfloor +1} & \text{si } np \notin \mathbb{N}
			\end{cases}$
		\end{itemize}
	\end{itemize}
	
	\subsection{Análisis de asociación}
	El segundo conjunto de datos, que se empleará para realizar el análisis de asociación, estará formado por las siguientes conjuntos de extras incluidos en 8 ventas de coches: {X, C, N, B}, {X, T, B, C), {N, C, X}, {N, T, X, B}, {X, C, B}, {N}, {X, B, C}, {T, A}. Donde: {X: Faros de Xenon, A: Alarma, T: Techo Solar, N: Navegador, B: Bluetooth, C: Control de Velocidad}, son los extras que se pueden incluir en cada coche
		
		\subsection{Análisis de detección de datos anómalos}
		
		\subsubsection{Técnicas con base estadística}
		El tercer conjunto de datos, que se empleará para realizar el análisis de detección de datos anómalos utilizando técnicas con base estadística, estará formado por los siguientes 10 valores de velocidades de respuesta y temperaturas normalizadas de un microprocesador {Velocidad, Temperatura}: {10, 7.46; 8, 6.77; 13, 12.74; 9, 7.11; 11, 7.81; 14, 8.84; 6, 6.08; 4, 5.39; 12, 8.15; 7, 6.42; 5, 5.73}. Aplicar las medidas de ordenación a la velocidad y las de dispersión a la temperatura.
		
		\paragraph{Solución:}
		\begin{itemize}
			\item Medidas de ordenación (Velocidad): Para este análisis de detección de outliers, se va a hacer uso de Caja y Bigotes. Esta técnica consiste en ordenar los elementos, calcular el primer y tercer cuartil y establecer unos límites, si algún valor no se encuentra dentro de estos límites, será considerado outlier. \\ Todo esto está implementado en la función: \texttt{cajaBigotes(matriz,valor,d)}.
			\begin{itemize}
				\item[-] Parámetros:
				\begin{itemize}
					\item \texttt{matriz}: Una matriz de datos númericos.
					\item \texttt{valor}: El nombre de la medidad (fila de la matriz) sobre la que queremos realizar el análisis.
					\item \texttt{d}: Grado de outlier.
				\end{itemize}
				
				\item[-] Retorno: Imprime por pantalla todos aquellos valores que queden fuera de los límites establecidos, es decir, los outliers.
				
				\item[-] Explicación: Esta función calcula los outliers sobre una serie de valores. Recibe el grado de outlier (\texttt{d}) y una matriz (\texttt{matriz}) con dichos valores y lo primero que hace es crear un dataframe de la traspuesta de dicha matriz, para facilitar su tratamiento. Después a partir de \texttt{valor}, obtiene la fila de la matriz que contiene los valores que vamos a evaluar. Una vez hecho esto hace uso de la función \texttt{quantiler()}, la cual hemos implementado previamente, para calcular el primer y tercer cuartil, \texttt{$Q_{1}$} y \texttt{$Q_{3}$} respectivamente . Por último calcula los límites a partir de, \texttt{$(Q_{1} - d \cdot (Q_{3} - Q_{1}), Q_{3} + d \cdot (Q_{3} - Q_{1}))$} e imprimirá por pantalla todos aquellos valores que se encuentren fuera de estos límites establecidos, ya que, serán considerados outliers.
			\end{itemize}
			
			\item Medidas de dispersión (Temperatura): Para este análisis de detección de outliers, se va a hacer uso de la Desviación Típica. Esta técnica consiste en calcular la media y la desviación típica de los valores a evaluar y establecer unos límites, si algún valor no se encuentra dentro de estos límites, será considerado outlier. \\
			Todo esto está implementado en la función: \texttt{desvTip(matriz,valor,d)}.
			\begin{itemize}
				\item[-] Parámetros:
				\begin{itemize}
					\item \texttt{matriz}: Una matriz de datos númericos.
					\item \texttt{valor}: El nombre de la medidad (fila de la matriz) sobre la que queremos realizar el análisis.
					\item \texttt{d}: Grado de outlier.
				\end{itemize}
				
				\item[-] Retorno: Imprime por pantalla todos aquellos valores que queden fuera de los límites establecidos, es decir, los outliers.
				
				\item[-] Explicación: Esta función calcula los outliers sobre una serie de valores. Recibe el grado de outlier (\texttt{d}) y una matriz (\texttt{matriz}) con dichos valores y lo primero que hace es crear un dataframe de la traspuesta de dicha matriz, para facilitar su tratamiento. Después a partir de \texttt{valor}, obtiene la fila de la matriz que contiene los valores que vamos a evaluar. Una vez hecho esto hace uso de las funciónes \texttt{meanr()} y \texttt{sdr()}, las cuales hemos implementado previamente, para calcular la media \texttt{$\bar{x}$$_{a}$} y la desviación típica \texttt{s} respectivamente. Por último calcula los límites a partir de, \texttt{$(\bar{x}_{a} - d \cdot s, \bar{x}_{a} + d \cdot s)$} e imprimirá por pantalla todos aquellos valores que se encuentren fuera de estos límites establecidos, ya que, serán considerados outliers.
			\end{itemize}
		\end{itemize}
		
		\subsubsection{Técnicas basadas en la proximidad y en la densidad}
		El cuarto conjunto de datos, que se empleará para realizar el análisis de detección de datos anómalos utilizando técnicas basadas en la proximidad y en la densidad, estará formado por el número de Mujeres y Hombres inscritos en una serie de cinco seminarios que se han impartido sobre biología. Los datos son: {Mujeres, Hombres}: 1. {9, 9}; 2. {9, 7}; 3. {11, 11}; 4. {2, 1}; 5. {11, 9}.
		
		\paragraph{Solución:}
		\begin{itemize}
			\item Técnicas basadas en proximidad (k-Vecinos): Para este análisis de detección de outliers, se va a hacer uso de la técnica k-vecinos. Esta técnica consiste en buscar sucesos muy separados al resto en función de sus distancias. Para ello se calculan las distancias euclídeas entre todos los puntos, para posteriormente ordenar estas distancias de forma creciente, solo se ordenará el número de distancias establecido por \texttt{k}. Por último se comprueba si el vecino \texttt{k} supera el grado de outlier establecido por \texttt{d}, si lo hace, será considerado outlier.
			\begin{itemize}
				\item[-] Parámetros:
				\begin{itemize}
					\item \texttt{matriz}: Matriz de valores númericos.
					\item \texttt{k}: Número de orden k.
					\item \texttt{d}: Grado de outlier.
				\end{itemize}
				
				\item[-] Retorno: Imprime por pantalla todos aquellos sucesos cuyo \texttt{k}, se encuentre a una distancia mayor que el grado de outlier \texttt{d}, es decir, los outliers.
				
				\item[-] Explicación: Esta función calcula los outliers sobre una serie de sucesos. Recibe el número de orden \texttt{k}, el grado de outlier (\texttt{d}) y una matriz (\texttt{matriz}) con dichos sucesos. El primer paso es calcular las distancias euclídeas de la forma, \texttt{$\sqrt{(x_2 - x_1)^2 + (y_2 - y_1)^2}$}, a partir de la función \texttt{distEuc()}. Después se ordenan dichas distancias de menor a mayor. Por último se verifica dentro de las distancias ordenadas, si el vecino \texttt{k} de cada punto, supera el valor establecido inicialmente por \texttt{d}, si esto sucede se imprime dicho suceso por pantalla, ya que. será considerado outlier.
			\end{itemize}
			
			\item Técnicas basadas en densidad (Local Outlier Factor):
		\end{itemize}   
	\end{document}